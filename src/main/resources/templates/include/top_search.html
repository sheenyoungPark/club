<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Top Menu</title>
</head>
<body>
<!-- fragment ëª…í™•íˆ ì§€ì • -->
<div th:fragment="top_search">
    <header class="header">
        <a th:href="@{/}">
            <img th:src="@{/sources/picture/ìš°ì£¼ë™ë¡œê³ .png}" alt="ìš°ì£¼ë™ ë¡œê³ " class="logo-img">
        </a>
        <nav class="nav">
            <a th:href="@{/category/category}">ì¹´í…Œê³ ë¦¬</a>
            <a th:href="@{/community/board}">ì»¤ë®¤ë‹ˆí‹°</a>
            <a th:href="@{/reserve/main}">ì˜ˆì•½í•˜ê¸°</a>
            <a th:href="@{/survey/start}">ìœ í˜•ê²€ì‚¬</a>
            <div class="right-section">
                <button id="searchToggle" class="search-toggle" type="button">ğŸ”</button>
            </div>
        </nav>

        <div class="right-section">
            <!-- ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¥¸ ì¡°ê±´ë¶€ ë²„íŠ¼ -->
            <div th:if="${loginMember != null && loginMember.login == true}">
                <span th:text="${loginMember.member_name} + 'ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤'"></span>
                <button type="button" th:onclick="|location.href='@{/member/memberinfo}'|" class="login-btn">ë‚´ì •ë³´</button>
                <button type="button" th:onclick="|location.href='@{/member/logout}'|" class="login-btn">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
            <div th:if="${loginBusiness != null && loginBusiness.login == true}">
                <span th:text="${loginBusiness.business_name} + 'ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤'"></span>
                <button type="button" th:onclick="|location.href='@{/member/memberinfo}'|" class="login-btn">ë‚´ì •ë³´</button>
                <button type="button" th:onclick="|location.href='@{/member/logout}'|" class="login-btn">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
            <div th:unless="${(loginMember != null && loginMember.login == true) || (loginBusiness != null && loginBusiness.login == true)}">
                <button type="button" th:onclick="|location.href='@{/member/login}'|" class="login-btn">ë¡œê·¸ì¸</button>
                <button type="button" th:onclick="|location.href='@{/member/signup}'|" class="login-btn">íšŒì›ê°€ì…</button>
            </div>
        </div>
    </header>

    <div id="searchContainer" class="search-container hidden">
        <div class="search-box">
            <form th:action="@{/look/search}" class="search-form">
                <select id="regionDropdown" class="search-dropdown" name="region">
                    <option selected disabled>ì§€ì—­</option>
                </select>
                <input type="text" name="age" class="search-age" placeholder="ì¶œìƒë…„ë„(ex 1996)">
                <input type="text" name="searchtxt" class="search-input" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                <button class="search-btn" type="submit">ğŸ”</button>
            </form>
        </div>

        <!-- ì§€ì—­ ì„ íƒ ëª¨ë‹¬ -->
        <div id="regionModal" class="region-modal">
            <div class="region-modal-content">
                <div class="region-modal-header">
                    <h3>ì§€ì—­ ì„ íƒ</h3>
                    <button class="region-modal-close" id="regionModalClose">&times;</button>
                </div>
                <div class="region-selection-container">
                    <div class="city-list" id="cityList">
                        <!-- ì‹œ/ë„ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                    <div class="district-list" id="districtList">
                        <!-- ì„ íƒëœ ì‹œ/ë„ì˜ êµ°/êµ¬ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                </div>
                <div class="region-modal-footer">
                    <button class="confirm-btn" id="confirmRegion">í™•ì¸</button>
                </div>
            </div>
        </div>
        <div class="search-tags" id="searchTagsContainer"></div>
    </div>
    <script th:inline="javascript">
        if (locationsFromServer) {
            window.locationsFromServer = locationsFromServer;
            console.log('ì§€ì—­ ë°ì´í„° ì´ˆê¸°í™” ì™„ë£Œ:', window.locationsFromServer.length);
        } else {
            console.log('ì§€ì—­ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
            window.locationsFromServer = [];
        }
    </script>
</div>
</body>
</html>