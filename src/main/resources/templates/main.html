<!DOCTYPE html>
<html xmlns:th="  http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>웹사이트</title>
  <link rel="stylesheet" th:href="@{/css/main.css}">
  <link rel="stylesheet" th:href="@{/css/bottom.css}">
  <link rel="stylesheet" th:href="@{/css/top.css}">
</head>
<body>

<div th:insert="~{include/top_search :: top_search}"></div>

<div class="slider">
  <div class="arrow-left">◀</div>
  <div class="arrow-right">▶</div>
  <div class="slider-images">
    <div class="slider-image" id="slider" style="display: none;">
      <img th:src="@{/sources/picture/설명2.jpg}" alt="이미지 1">
    </div>
    <div class="slider-image" style="display: none;">
      <img th:src="@{/sources/picture/설명3.jpg}" alt="이미지 2">
    </div>
    <div class="slider-image" style="display: none;">
      <img th:src="@{/sources/picture/설명4.jpg}" alt="이미지 3">
    </div>
    <div class="slider-image" style="display: none;">
      <img th:src="@{/sources/picture/설명5.jpg}" alt="이미지 4">
    </div>
    <div class="slider-image" style="display: none;">
      <img th:src="@{/sources/picture/설명6.jpg}" alt="이미지 5">
    </div>
    <div class="slider-image" style="display: none;">
      <img th:src="@{/sources/picture/설명7.jpg}" alt="이미지 6">
    </div>
  </div>
  <div class="slider-nav">
    <div class="slider-dot"></div>
    <div class="slider-dot"></div>
    <div class="slider-dot"></div>
    <div class="slider-dot"></div>
    <div class="slider-dot"></div>
    <div class="slider-dot"></div>
  </div>
</div>

<!--추천 카테고리-->
<section class="categories">
  <h2>추천 카테고리</h2>
  <div class="category-icons">
    <!-- ✅ 로그인하지 않았거나 member_personality가 0일 경우 기존 추천 카테고리 유지 -->
    <th:block th:if="${loginMember.isLogin == false || loginMember.member_personality == 0}">
      <div class="category" th:each="category, iterStat : ${categoryCount}" th:if="${iterStat.index < 5}">
        <button class="category-icon" th:onclick="|location.href='@{/category/category_info(category_type=${category.category_type})}'|">
          <img th:src="@{'/sources/picture/' + ${category.category_type} + '.png'}"
               th:alt="${category.category_type} + ' 아이콘'"
               onerror="this.src='/sources/picture/default.png'">
        </button>
        <span class="category-name" th:text="${category.category_type}">카테고리명</span>
      </div>
    </th:block>

    <!-- ✅ 로그인한 상태에서 member_personality 값에 따라 맞춤 추천 -->
    <th:block th:if="${loginMember.isLogin != false && loginMember.member_personality > 0}">
      <th:block th:switch="${loginMember.member_personality}">
        <!-- 🔹 탐험가 (1) -->
        <th:block th:case="1">
          <th:block th:with="categories=${'아웃도어,스포츠관람,자동차,게임,댄스'.split(',')}">
            <div class="category" th:each="category : ${categories}">
              <button class="category-icon" th:onclick="|location.href='@{/category/category_info(category_type=${category})}'|">
                <img th:src="@{'/sources/picture/' + ${category} + '.png'}"
                     th:alt="${category} + ' 아이콘'"
                     onerror="this.src='/sources/picture/default.png'">
              </button>
              <span class="category-name" th:text="${category}">카테고리명</span>
            </div>
          </th:block>
        </th:block>

        <!-- 🔹 관리자 (2) -->
        <th:block th:case="2">
          <th:block th:with="categories=${'운동,요리,자기계발,봉사활동,업종'.split(',')}">
            <div class="category" th:each="category : ${categories}">
              <button class="category-icon" th:onclick="|location.href='@{/category/category_info(category_type=${category})}'|">
                <img th:src="@{'/sources/picture/' + ${category} + '.png'}"
                     th:alt="${category} + ' 아이콘'"
                     onerror="this.src='/sources/picture/default.png'">
              </button>
              <span class="category-name" th:text="${category}">카테고리명</span>
            </div>
          </th:block>
        </th:block>

        <!-- 🔹 교류가 (3) -->
        <th:block th:case="3">
          <th:block th:with="categories=${'사교,언어,문화,반려동물,음악'.split(',')}">
            <div class="category" th:each="category : ${categories}">
              <button class="category-icon" th:onclick="|location.href='@{/category/category_info(category_type=${category})}'|">
                <img th:src="@{'/sources/picture/' + ${category} + '.png'}"
                     th:alt="${category} + ' 아이콘'"
                     onerror="this.src='/sources/picture/default.png'">
              </button>
              <span class="category-name" th:text="${category}">카테고리명</span>
            </div>
          </th:block>
        </th:block>

        <!-- 🔹 분석가 (4) -->
        <th:block th:case="4">
          <th:block th:with="categories=${'인문학,공예,사진,스포츠관람'.split(',')}">
            <div class="category" th:each="category : ${categories}">
              <button class="category-icon" th:onclick="|location.href='@{/category/category_info(category_type=${category})}'|">
                <img th:src="@{'/sources/picture/' + ${category} + '.png'}"
                     th:alt="${category} + ' 아이콘'"
                     onerror="this.src='/sources/picture/default.png'">
              </button>
              <span class="category-name" th:text="${category}">카테고리명</span>
            </div>
          </th:block>
        </th:block>

        <!-- 기본값 (예외 처리) -->
        <th:block th:case="*">
          <p>회원님의 성격 유형을 설정해주세요!</p>
        </th:block>
      </th:block>
    </th:block>
  </div>
</section>





<!--인기 동호회-->
<section class="recommended-clubs" id="recommended-clubs">
  <h2>인기 동호회</h2>
  <div class="club-container">
    <!-- popularClubs 리스트의 항목들을 최대 4개까지만 순서대로 표시 -->
    <button class="club-box" th:each="club, iterStat : ${clubCount}" th:if="${iterStat.index < 4}"
            th:onclick="|location.href='@{/club/club_info(club_id=${club.club_id})}'|">
      <!-- ✅ 클럽 이미지 추가 -->
      <div class="club-image-container">
        <img th:if="${club.club_profile != null}"
             th:src="@{/image/clubprofile/{img}(img=${club.club_profile})}"
             alt="클럽 대표 이미지"
             class="club-profile-image">

        <img th:unless="${club.club_profile != null}"
             th:src="@{/sources/picture/기본이미지.png}"
             alt="기본 이미지"
             class="club-profile-image">
      </div>

      <!-- ✅ 동호회 이름 -->
      <!-- 동호회 이름 추가 -->
      <h3 class="club-name" th:text="${club.club_name}">동호회명</h3>
    </button>
  </div>
</section>

<!-- 하단 정보바 -->
<a th:href="@{/admin/login}">관리자페이지</a>
<div th:replace="~{include/bottom_info :: bottom_info}"></div>
<script th:src="@{/js/main.js}"></script>
<script th:src="@{/js/top.js}"></script>
</body>
</html>